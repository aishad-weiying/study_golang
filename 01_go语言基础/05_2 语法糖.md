## 语法糖

语法糖的概念是由英国的计算机科学家`Peter J.Landin`提出,用于表示编程语言中的某个类型的语法,这些语法不会影响功能,但是使用起来确实非常的方便

语法糖,也称为糖语法,这些语法不仅仅会影响功能,编译后的结果跟不使用语法糖也一样

语法糖,有可能让代码编写变得简单,也有可能让代码可读性提高,也有可能让代码出现问题

## Go 语言的语法糖

最常见的语法糖莫过于`:=`,其次表示函数变参的`...`

### `:=`语法糖

`:=`用来声明变量并进行赋值,不管是什么项目,都会大量的应用,但是也会出现下面的问题

1. 多变量赋值可能会重新声明

```go
field1, offset := nextField(str, 0)
field2, offset := nextField(str, offset)
```

上面代码中offset被重新声明,重新声明并没有什么问题,它并没有引入新的变量,只是把变量的值改变了:

- 当`:=`左侧存在新的变量的时候,那么已经声明的变量会被重新声明,不会有其他的额外副作用
- 当`:=`左侧没有新的变量是不允许的,编译的时候会提示`no new variable on left side of :=`

但是,我们说的重新申明不会引入新的问题,要满足一个条件,就是变量声明要在同一个作用域出现,如果出现在不同的作用域,那就可能创建了同名变量,同一个函数不同作用域的同名变量往往不是预期的做法,很容易陷入缺陷,例如下面的代码

```go
package main

import "fmt"

func main() {
	i,j := 0,0
	if true {
		j,k := "哈哈","嘿嘿"
		fmt.Println("j:",j,"K:",k)
	}
	fmt.Println("i:",i,"j:",j)
}
```

上面的代码就涉及到了变量作用域的问题

2. 不能用于函数的外部

简短的变量场景只能用于函数中,使用`:=`来声明和初始化全局变量是行不通的



### `...`语法糖

可变参函数指的是函数的某个参数可有可无,即使这个参数是0个或者多个,声明可变参数函数的方式是在参数类型前面加上`...`前缀

比如`fmt`包中的方法

```go
func Println(a ...interface{})
```

使用可边长的参数的函数时,有以下几点需要注意:

- 可变参数必须在函数参数列表的尾部
- 可变参数在函数内部是作为切片来解析的
- 可变参数可以不填,不填的时候,在函数的内部当做nil切片处理
- 可变参数必须是类型相同的,如果需要是不同类型的可以定义为interface{}类型
- 当给变长参数传递切片的时候,不会生成新的切片,也就是说函数内部使用的切片与传入的切片共享相同的存储空间,也就是说如果在函数内部修改的切片,也会应该外部的使用

